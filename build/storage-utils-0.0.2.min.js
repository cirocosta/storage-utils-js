/* storage-utils - version 0.0.2 - 06-02-2014 */
function DatabaseTable(a,b){if(!a||"undefined"==typeof a)throw"DatabaseTable(table_name) needs a valid name";this.storage="undefined"==typeof b?localStorage:sessionStorage,this.table_name=a,this.parsed_table=null,this.parseDatabaseTable()}DatabaseTable.prototype.parseDatabaseTable=function(){try{this.parsed_table=JSON.parse(this.storage[this.table_name])}catch(a){this.parsed_table=[]}return this.parsed_table},DatabaseTable.prototype.saveState=function(){this.storage[this.table_name]=JSON.stringify(this.parsed_table)},DatabaseTable.prototype.deleteObjectFromPosition=function(a){return this.parsed_table&&a>-1?(this.parsed_table.splice(a,1),this.saveState(),!0):!1},DatabaseTable.prototype.deleteObject=function(a){if(this.parsed_table&&null!==a){for(var b=-1,c=0;c<this.parsed_table.length;c++)if(this.parsed_table[c]===a){b=c,this.deleteObjectFromPosition(b);break}return b}return-1},DatabaseTable.prototype.getById=function(a,b){"undefined"==typeof b&&(b="id");for(var c in this.parsed_table){var d=this.parsed_table[c];if(d[b].toString()===a.toString())return d}return null},DatabaseTable.prototype.getObjectPosition=function(a){if(this.parsed_table)for(var b=0;b<this.parsed_table.length;b++)if(this.parsed_table[b]===a)return b;return-1},DatabaseTable.prototype.putObject=function(a,b){return("undefined"==typeof b||b===!1)&&(a._id=(new Date).getTime()),this.parsed_table.push(a),this.saveState(),a},DatabaseTable.prototype.updateObject=function(a){if(this.parsed_table){if("undefined"!=typeof a){var b=this.getObjectPosition(a);return b>-1?(this.parsed_table[b]=a,this.saveState(),!0):!1}return!1}return this.putObject(a)};